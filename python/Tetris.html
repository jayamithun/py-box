<!doctype html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta property="og:title" content="PyBox - Python Games">
    <meta property="og:type" content="website">
    <meta property="og:description" content="Python Games to increase your skill and experience in Python">
<!--     <meta property="og:image" content="">
    <meta property="og:url" content=""> -->

    <meta name="twitter:title" content="PyBox - Python Games">
    <meta name="twitter:site" content="@hhhrrrttt222111">
    <meta name="twitter:creator" content="@hhhrrrttt222111">
    <meta name="twitter:description" content="Python Games to increase your skill and experience in Python">

    
    <link rel = "icon" href ="..\assets\icons\logo-png.png" type = "image/x-icon">

    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" 
    integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" 
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="games.css">
    <title>PyBox - Tetris</title>
  </head>
  <body>

    <nav class="navbar static-top">
      <div class="container">
        <a class="navbar-brand" href="../index.html"><img src="..\assets\icons\logo-png.png" class="nav-logo" alt="PyBox"></a>
        <button onclick="goBack()" class="btn btn-dark">Go Back</button>
      </div>
      
    </nav>

        
        <div class="container">
          <div class="row">
            <div class="col-sm-4">
                    <h1 class="game-title">Tetris</h1>
                    <p class="game-desc">A once popular video game, you must complete lines by moving differently shaped pieces which descend onto the playing field. 
                        The completed lines vanish and you gain points.The game ends when the playing field is filled. Longer you hold out, higher your score.</p>
                    <ul class="nav nav-pills flex-column">
                        <li class="nav-item">
                        <a class="fa fa-2x fa-github" href="https://github.com/hhhrrrttt222111/PyBox/blob/master/Games/Tetris.py" target="_blank" rel="noopener noreferrer"></a>
                        <a href="https://github.com/hhhrrrttt222111/PyBox/stargazers" target="_blank" rel="noopener noreferrer" class="git-star"><img alt="GitHub stars" src="https://img.shields.io/github/stars/hhhrrrttt222111/PyBox?style=social"></a>
                        </li>
                    </ul>
                    <hr class="d-sm-none">
            </div>


            <div class="col-sm-8">

                  
                   <div class="download">
                    <h4 class="dwnld">Download</h4>
                    <a class="btn" href="new.txt" download><i class="fa fa-2x fa-file"></i></a>
                    <a class="btn" href="new.txt" download><img src="../assets/icons/python-icon.png" alt="python-icon" class="python-icon"></i></a>
                   </div>
                    


                    <!-- CODE -->
                    <pre class="code">
    <span class="comment">    
    # This game is from freeCodeCamp.org
    # https://www.freecodecamp.org/

    # pip install pygame

    # 10 x 20 square grid
    # shapes: S, Z, I, O, J, L, T
    # represented in order by 0 - 6

    # Control with arrow keys </span>

    <span class="in-built">import</span> pygame
    <span class="in-built">import</span> random


    <span class="variable">icon</span> = pygame.image.load('logo-ico.ico')
    pygame.display.<span class="function">set_icon</span>(<span class="variable">icon</span>)
    pygame.display.<span class="function">set_caption</span>('Tetris')
    pygame.<span class="variable">font</span>.init()


    <span class="variable">s_width</span> = 800
    <span class="variable">s_height</span> = 700
    <span class="variable">play_width</span> = 300  <span class="comment"># meaning 300 // 10 = 30 width per block</span>
    <span class="variable">play_height</span> = 600  <span class="comment"># meaning 600 // 20 = 20 height per block</span>
    <span class="variable">block_size</span> = 30

    <span class="variable">top_left_x</span> = (<span class="variable">s_width</span> - <span class="variable">play_width</span>) // 2
    <span class="variable">top_left_y</span> = <span class="variable">s_height</span> - <span class="variable">play_height</span>


    <span class="comment"># SHAPE FORMATS</span>

    S = [['.....',
            '.....',
            '..00.',
            '.00..',
            '.....'],
            ['.....',
            '..0..',
            '..00.',
            '...0.',
            '.....']]

    Z = [['.....',
            '.....',
            '.00..',
            '..00.',
            '.....'],
            ['.....',
            '..0..',
            '.00..',
            '.0...',
            '.....']]

    I = [['..0..',
            '..0..',
            '..0..',
            '..0..',
            '.....'],
            ['.....',
            '0000.',
            '.....',
            '.....',
            '.....']]

    O = [['.....',
            '.....',
            '.00..',
            '.00..',
            '.....']]

    J = [['.....',
            '.0...',
            '.000.',
            '.....',
            '.....'],
            ['.....',
            '..00.',
            '..0..',
            '..0..',
            '.....'],
            ['.....',
            '.....',
            '.000.',
            '...0.',
            '.....'],
            ['.....',
            '..0..',
            '..0..',
            '.00..',
            '.....']]

    L = [['.....',
            '...0.',
            '.000.',
            '.....',
            '.....'],
            ['.....',
            '..0..',
            '..0..',
            '..00.',
            '.....'],
            ['.....',
            '.....',
            '.000.',
            '.0...',
            '.....'],
            ['.....',
            '.00..',
            '..0..',
            '..0..',
            '.....']]

    T = [['.....',
            '..0..',
            '.000.',
            '.....',
            '.....'],
            ['.....',
            '..0..',
            '..00.',
            '..0..',
            '.....'],
            ['.....',
            '.....',
            '.000.',
            '..0..',
            '.....'],
            ['.....',
            '..0..',
            '.00..',
            '..0..',
            '.....']]

    shapes = [S, Z, I, O, J, L, T]
    shape_colors = [(0, 255, 0), (255, 0, 0), (0, 255, 255), (255, 255, 0), (255, 165, 0), (0, 0, 255), (128, 0, 128)]
    <span class="comment"># index 0 - 6 represent shape</span>


    class Piece(object):
        rows = 20  <span class="comment"># y</span>
        columns = 10  <span class="comment"># x</span>

        <span class="in-built">def</span> __init__(self, column, <span class="variable">row</span>, shape):
            self.x = column
            self.y = <span class="variable">row</span>
            self.shape = shape
            self.color = shape_colors[shapes.index(shape)]
            self.rotation = 0  <span class="comment"># number from 0-3</span>


    <span class="in-built">def</span> <span class="function">create_grid</span>(<span class="variable">locked_positions</span>={}):
        <span class="variable">grid</span> = [[(0,0,0) <span class="in-built">for</span> x in range(10)] <span class="in-built">for</span> x in range(20)]

        <span class="in-built">for</span> i in range(len(<span class="variable">grid</span>)):
            <span class="in-built">for</span> j in range(len(<span class="variable">grid</span>[i])):
                <span class="in-built">if</span> (j,i) in <span class="variable">locked_positions</span>:
                    c = <span class="variable">locked_positions</span>[(j,i)]
                    <span class="variable">grid</span>[i][j] = c
        <span class="in-built">return</span> <span class="variable">grid</span>


    <span class="in-built">def</span> <span class="function">convert_shape_format</span>(shape):
        positions = []
        format = shape.shape[shape.rotation % len(shape.shape)]

        <span class="in-built">for</span> i, line in <span class="function">enumerate</span>(format):
            <span class="variable">row</span> = list(line)
            <span class="in-built">for</span> j, column in <span class="function">enumerate</span>(<span class="variable">row</span>):
                <span class="in-built">if</span> column == '0':
                    positions.append((shape.x + j, shape.y + i))

        <span class="in-built">for</span> i, pos in <span class="function">enumerate</span>(positions):
            positions[i] = (pos[0] - 2, pos[1] - 4)

        <span class="in-built">return</span> positions


    <span class="in-built">def</span> <span class="function">valid_space</span>(shape, <span class="variable">grid</span>):
        accepted_positions = [[(j, i) <span class="in-built">for</span> j in range(10) <span class="in-built">if</span> <span class="variable">grid</span>[i][j] == (0,0,0)] <span class="in-built">for</span> i in range(20)]
        accepted_positions = [j <span class="in-built">for</span> sub in accepted_positions <span class="in-built">for</span> j in sub]
        formatted = <span class="function">convert_shape_format</span>(shape)

        <span class="in-built">for</span> pos in formatted:
            <span class="in-built">if</span> pos not in accepted_positions:
                <span class="in-built">if</span> pos[1] > -1:
                    <span class="in-built">return</span> False

        <span class="in-built">return</span> True


    <span class="in-built">def</span> check_lost(positions):
        <span class="in-built">for</span> pos in positions:
            x, y = pos
            <span class="in-built">if</span> y < 1:
                <span class="in-built">return</span> True
        <span class="in-built">return</span> False


    <span class="in-built">def</span> <span class="function">get_shape</span>():
        global shapes, shape_colors

        <span class="in-built">return</span> Piece(5, 0, random.choice(shapes))


    <span class="in-built">def</span> <span class="function">draw_text_middle</span>(text, size, color, surface):
        <span class="variable">font</span> = pygame.<span class="variable">font</span>.SysFont('comicsans', size, bold=True)
        <span class="variable">label</span> = <span class="variable">font</span>.render(text, 1, color)

        surface.blit(<span class="variable">label</span>, (<span class="variable">top_left_x</span> + <span class="variable">play_width</span>/2 - (<span class="variable">label</span>.get_width() / 2), <span class="variable">top_left_y</span> + <span class="variable">play_height</span>/2 - <span class="variable">label</span>.get_height()/2))


    <span class="in-built">def</span> <span class="function">draw_grid</span>(surface, <span class="variable">row</span>, col):
        sx = <span class="variable">top_left_x</span>
        sy = <span class="variable">top_left_y</span>
        <span class="in-built">for</span> i in range(<span class="variable">row</span>):
            pygame.draw.line(surface, (128,128,128), (sx, sy+ i*30), (sx + <span class="variable">play_width</span>, sy + i * 30))  <span class="comment"># horizontal lines</span>
            <span class="in-built">for</span> j in range(col):
                pygame.draw.line(surface, (128,128,128), (sx + j * 30, sy), (sx + j * 30, sy + <span class="variable">play_height</span>)) <span class="comment"> # vertical lines</span>


    <span class="in-built">def</span> <span class="function">clear_rows</span>(<span class="variable">grid</span>, locked):
        <span class="comment"># need to see if row is clear the shift every other row above down one</span>

        <span class="variable">inc</span> = 0
        <span class="in-built">for</span> i in range(len(<span class="variable">grid</span>)-1,-1,-1):
            <span class="variable">row</span> = <span class="variable">grid</span>[i]
            <span class="in-built">if</span> (0, 0, 0) not in <span class="variable">row</span>:
                <span class="variable">inc</span> += 1
                <span class="comment"># add positions to remove from locked</span>
                ind = i
                <span class="in-built">for</span> j in range(len(<span class="variable">row</span>)):
                    try:
                        del locked[(j, i)]
                    except:
                        continue
        <span class="in-built">if</span> <span class="variable">inc</span> > 0:
            <span class="in-built">for</span> key in sorted(list(locked), key=lambda x: x[1])[::-1]:
                x, y = key
                <span class="in-built">if</span> y < ind:
                    newKey = (x, y + <span class="variable">inc</span>)
                    locked[newKey] = locked.pop(key)


    <span class="in-built">def</span> <span class="function">draw_next_shape</span>(shape, surface):
        <span class="variable">font</span> = pygame.<span class="variable">font</span>.SysFont('comicsans', 30)
        <span class="variable">label</span> = <span class="variable">font</span>.render('Next Shape', 1, (255,255,255))

        sx = <span class="variable">top_left_x</span> + <span class="variable">play_width</span> + 50
        sy = <span class="variable">top_left_y</span> + <span class="variable">play_height</span>/2 - 100
        format = shape.shape[shape.rotation % len(shape.shape)]

        <span class="in-built">for</span> i, line in <span class="function">enumerate</span>(format):
            <span class="variable">row</span> = list(line)
            <span class="in-built">for</span> j, column in <span class="function">enumerate</span>(<span class="variable">row</span>):
                <span class="in-built">if</span> column == '0':
                    pygame.draw.rect(surface, shape.color, (sx + j*30, sy + i*30, 30, 30), 0)

        surface.blit(<span class="variable">label</span>, (sx + 10, sy- 30))


    <span class="in-built">def</span> <span class="function">draw_window</span>(surface):
        surface.fill((0,0,0))
        <span class="comment"># Tetris Title</span>
        <span class="variable">font</span> = pygame.<span class="variable">font</span>.SysFont('comicsans', 60)
        <span class="variable">label</span> = <span class="variable">font</span>.render('TETRIS', 1, (255,255,255))

        surface.blit(<span class="variable">label</span>, (<span class="variable">top_left_x</span> + <span class="variable">play_width</span> / 2 - (<span class="variable">label</span>.get_width() / 2), 30))

        <span class="in-built">for</span> i in range(len(<span class="variable">grid</span>)):
            <span class="in-built">for</span> j in range(len(<span class="variable">grid</span>[i])):
                pygame.draw.rect(surface, <span class="variable">grid</span>[i][j], (<span class="variable">top_left_x</span> + j* 30, <span class="variable">top_left_y</span> + i * 30, 30, 30), 0)

        <span class="comment"># draw grid and border</span>
        <span class="function">draw_grid</span>(surface, 20, 10)
        pygame.draw.rect(surface, (255, 0, 0), (<span class="variable">top_left_x</span>, <span class="variable">top_left_y</span>, <span class="variable">play_width</span>, <span class="variable">play_height</span>), 5)
        <span class="comment"># pygame.display.<span class="function">update</span>()</span>


    <span class="in-built">def</span> <span class="function">main</span>():
        global <span class="variable">grid</span>

        <span class="variable">locked_positions</span> = {}  <span class="comment"># (x,y):(255,0,0)</span>
        <span class="variable">grid</span> = <span class="function">create_grid</span>(<span class="variable">locked_positions</span>)

        <span class="variable">change_piece</span> = False
        <span class="variable">run</span> = True
        <span class="variable">current_piece</span> = <span class="function">get_shape</span>()
        <span class="variable">next_piece</span> = <span class="function">get_shape</span>()
        <span class="variable">clock</span> = pygame.time.Clock()
        <span class="variable">fall_time</span> = 0

        <span class="in-built">while</span> <span class="variable">run</span>:
            <span class="variable">fall_speed</span> = 0.27

            <span class="variable">grid</span> = <span class="function">create_grid</span>(<span class="variable">locked_positions</span>)
            <span class="variable">fall_time</span> += <span class="variable">clock</span>.<span class="function">get_rawtime</span>()
            <span class="variable">clock</span>.tick()

            <span class="comment"># PIECE FALLING CODE</span>
            <span class="in-built">if</span> <span class="variable">fall_time</span>/1000 >= <span class="variable">fall_speed</span>:
                <span class="variable">fall_time</span> = 0
                <span class="variable">current_piece</span>.y += 1
                <span class="in-built">if</span> not (<span class="function">valid_space</span>(<span class="variable">current_piece</span>, <span class="variable">grid</span>)) and <span class="variable">current_piece</span>.y > 0:
                    <span class="variable">current_piece</span>.y -= 1
                    <span class="variable">change_piece</span> = True

            <span class="in-built">for</span> event in pygame.event.get():
                <span class="in-built">if</span> event.type == pygame.QUIT:
                    <span class="variable">run</span> = False
                    pygame.display.quit()
                    quit()

                <span class="in-built">if</span> event.type == pygame.KEYDOWN:
                    <span class="in-built">if</span> event.key == pygame.K_LEFT:
                        <span class="variable">current_piece</span>.x -= 1
                        <span class="in-built">if</span> not <span class="function">valid_space</span>(<span class="variable">current_piece</span>, <span class="variable">grid</span>):
                            <span class="variable">current_piece</span>.x += 1

                    <span class="in-built">elif</span> event.key == pygame.K_RIGHT:
                        <span class="variable">current_piece</span>.x += 1
                        <span class="in-built">if</span> not <span class="function">valid_space</span>(<span class="variable">current_piece</span>, <span class="variable">grid</span>):
                            <span class="variable">current_piece</span>.x -= 1
                    <span class="in-built">elif</span> event.key == pygame.K_UP:
                        <span class="comment"># rotate shape</span>
                        <span class="variable">current_piece</span>.rotation = <span class="variable">current_piece</span>.rotation + 1 % len(<span class="variable">current_piece</span>.shape)
                        <span class="in-built">if</span> not <span class="function">valid_space</span>(<span class="variable">current_piece</span>, <span class="variable">grid</span>):
                            <span class="variable">current_piece</span>.rotation = <span class="variable">current_piece</span>.rotation - 1 % len(<span class="variable">current_piece</span>.shape)

                    <span class="in-built">if</span> event.key == pygame.K_DOWN:
                        <span class="comment"># move shape down</span>
                        <span class="variable">current_piece</span>.y += 1
                        <span class="in-built">if</span> not <span class="function">valid_space</span>(<span class="variable">current_piece</span>, <span class="variable">grid</span>):
                            <span class="variable">current_piece</span>.y -= 1

                    '''if event.key == pygame.K_SPACE:
                        while valid_space(<span class="variable">current_piece</span>, <span class="variable">grid</span>):
                            <span class="variable">current_piece</span>.y += 1
                        <span class="variable">current_piece</span>.y -= 1
                        print(<span class="function">convert_shape_format</span>(<span class="variable">current_piece</span>))'''  <span class="comment"># todo fix</span>

            shape_pos = <span class="function">convert_shape_format</span>(<span class="variable">current_piece</span>)

            <span class="comment"># add piece to the grid for drawing</span>
            <span class="in-built">for</span> i in range(len(shape_pos)):
                x, y = shape_pos[i]
                <span class="in-built">if</span> y > -1:
                    <span class="variable">grid</span>[y][x] = <span class="variable">current_piece</span>.color

            <span class="comment"># IF PIECE HIT GROUND</span>
            <span class="in-built">if</span> <span class="variable">change_piece</span>:
                <span class="in-built">for</span> pos in shape_pos:
                    p = (pos[0], pos[1])
                    <span class="variable">locked_positions</span>[p] = <span class="variable">current_piece</span>.color
                <span class="variable">current_piece</span> = <span class="variable">next_piece</span>
                <span class="variable">next_piece</span> = <span class="function">get_shape</span>()
                <span class="variable">change_piece</span> = False

                <span class="comment"># call four times to check for multiple clear rows</span>
                <span class="function">clear_rows</span>(<span class="variable">grid</span>, <span class="variable">locked_positions</span>)

            <span class="function">draw_window</span>(<span class="variable">win</span>)
            <span class="function">draw_next_shape</span>(<span class="variable">next_piece</span>, <span class="variable">win</span>)
            pygame.display.<span class="function">update</span>()

            <span class="comment"># Check if user lost</span>
            <span class="in-built">if</span> check_lost(<span class="variable">locked_positions</span>):
                <span class="variable">run</span> = False

        <span class="function">draw_text_middle</span>("You Lost", 40, (255,255,255), <span class="variable">win</span>)
        pygame.display.<span class="function">update</span>()
        pygame.time.delay(2000)


    <span class="in-built">def</span> <span class="function">main_menu</span>():
        <span class="variable">run</span> = True
        <span class="in-built">while</span> <span class="variable">run</span>:
            <span class="variable">win</span>.fill((0,0,0))
            <span class="function">draw_text_middle</span>('Press any key to begin.', 60, (255, 255, 255), <span class="variable">win</span>)
            pygame.display.<span class="function">update</span>()
            <span class="in-built">for</span> event in pygame.event.get():
                <span class="in-built">if</span> event.type == pygame.QUIT:
                    <span class="variable">run</span> = False

                <span class="in-built">if</span> event.type == pygame.KEYDOWN:
                    <span class="function">main</span>()
        pygame.quit()


    <span class="variable">win</span> = pygame.display.<span class="function">set_mode</span>((<span class="variable">s_width</span>, <span class="variable">s_height</span>))
    pygame.display.<span class="function">set_caption</span>('Tetris')

    <span class="comment"># start game</span>
    <span class="function">main_menu</span>()

                        </pre>

                        <!-- CODE -->
                    <br>





                    <div class="images">
                      <div id="carouselExampleFade" class="carousel slide carousel-fade" data-ride="carousel">
                        <ol class="carousel-indicators">
                          <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                          <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>

                        </ol>
                        <div class="carousel-inner">
                          <div class="carousel-item active">
                            <img src="img/Tetris-1.PNG" class="d-block w-100" alt="...">
                          </div>
                          <div class="carousel-item">
                            <img src="img/Tetris-2.PNG" class="d-block w-100" alt="...">
                          </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleFade" role="button" data-slide="prev">
                          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                          <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleFade" role="button" data-slide="next">
                          <span class="carousel-control-next-icon" aria-hidden="true"></span>
                          <span class="sr-only">Next</span>
                        </a>
                      </div>
                    </div>




                    <div class="buyme">
                      
                      <a href="https://ko-fi.com/hhhrrrttt222111" target="_blank" rel="noopener noreferrer"><span class="buy">Buy Me A Coffee</span><img src="../assets/icons/kofi.png" alt="ko-fi" class="coffee"></a>
                    </div>  
                  
            </div>
           
          </div>
          
        </div>

       
        
          <div class="footer">
              <p class="footer-heart">
                Made with <g-emoji class="g-emoji" alias="heart" fallback-src="https://raw.githubusercontent.com/hhhrrrttt222111/etudia/master/assets/necro.png?token=AKLVDPY75U5YNHZ7PRA4Y4K6TRB2I">
              <img class="emoji" alt="heart" height="20" width="20" src="https://raw.githubusercontent.com/hhhrrrttt222111/etudia/master/assets/necro.png?token=AKLVDPY75U5YNHZ7PRA4Y4K6TRB2I">
              </g-emoji> by <a href="http://hhhrrrttt222111.me/" target="_blank">HRT</a>
              </p>
            </div>
    
        


            <script>
              function goBack() {
                window.history.back();
              }
              </script> 
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" 
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" 
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" 
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>